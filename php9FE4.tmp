var xpath = require('casper').selectXPath;
var casper = require('casper').create({
    verbose: true,
    logLevel: 'debug',
    colorizerType: 'Dummy'
});

casper.userAgent('casper');
casper.start().then(function() {
    this.open('https://bscscan.com/token/0xec3422ef92b2fb59e84c8b02ba73f1fe84ed8d71', {
        headers: {
            'Accept': 'text/html'
        }
    });
});
casper.wait(
    5000,
    function () {
        this.echo('timeout occured');
    }
);
casper.then(function () {
    this.echo('[CURRENT_URL]' + this.getCurrentUrl());
    this.echo('[CURRENT_TITLE]' + this.getTitle());
    this.echo('[CURRENT_PAGE_CONTENT]' + this.getPageContent().replace(new RegExp('\r?\n','g'), ''));
    this.echo('[CURRENT_HTML]' + this.getHTML().replace(new RegExp('\r?\n','g'), ''));
    this.echo('[CURRENT_HEADERS]' + JSON.stringify(this.currentResponse.headers));
    this.echo('[CURRENT_STATUS]' + this.currentResponse.status);
    this.echo('[CURRENT_STATUS_TEXT]' + this.currentResponse.statusText);
    this.echo('[CURRENT_COOKIES]' + JSON.stringify(phantom.cookies));
});

casper.run();
